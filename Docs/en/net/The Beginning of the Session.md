# **The Beginning of the Session**

In this section we will be discussing something very important: the beginning of a nwtworking session of Grand Chase. More specifically, we will talk about the packet where the keys are set up.

In Grand Chase, the encryption and auth keys for the session are randomly generated by the server and sent to the client through the packet of ID 0x0001, which is the first packet with any information sent. 

Its data would look like this one:

> Note: the packet exposed here is from the season eternal. Haven't checked the packets from other seasons, but it may be different.

--
> ![](http://i.imgur.com/jD40Gtt.png)

First, let's talk about two things: the _prefix_ and the _count_.

* **Prefix**: in the "first packet", the prefix isn't random. Instead, it's always _00 00_. The new prefix is generated by the server and sent in the content of this packet;
* **Count**: in the "first packet", (obviously) the count does not measure the quantity of the packets sent. In this case, it's the count of initialized sessions, that is, the amount of connections already performed;

You may be wondering: "If the session keys are inside the encrypted data, what keys were used to encrypt the packet and generate the auth code of this packet?"

For this packet, Grand Chase uses two default keys which are stored by both client and server:

* **Default Encryption Key:** C7 D8 C4 BF B5 E9 C0 FD
* **Default Auth Key:** C0 D3 BD C3 B7 CE B8 B8

Having it explained, let's now analyze the packet payload.
> ![](http://i.imgur.com/QMBOl73.png)

It's like any other packet: it has a header, a content and 3 null bytes at the end. Let's focus on the content.

The highlighted values are respectively the _prefix_ to be used in the following packets sent by the server and the auth and encryption keys defined for the rest of the networking session. In our case:

* **The part in green is the new prefix**: 8E E7
* **The part in purple is the authentication key**: 62 88 F3 A7 D3 2C 87 C5
* **The part in red is the encryption key**: A4 29 1C 74 B2 CE 4A 34

If we go back to the packet that we have seen at the beginning of the tutorial, we will notice that [its prefix](./The%20Overall%20Structure.md#prefix) (_E7 8E_) corresponds to that defined in the "first packet" (_8E E7_). The detail is that the prefix is in the little-endian format in the header while it's big-endian in the "first packet's" content.

And for now, that's all :smile:
